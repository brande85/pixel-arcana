<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Arcana - File Loading Test</title>
    <style>
        body {
            font-family: monospace;
            background: #0f0f1e;
            color: #00ff41;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        h1 {
            color: #ff0080;
        }
        .test {
            margin: 20px 0;
            padding: 15px;
            border: 2px solid #00ff41;
            background: #1a1a2e;
        }
        .success {
            color: #00ff41;
        }
        .error {
            color: #ff0080;
        }
        .loading {
            color: #ffaa00;
        }
    </style>
</head>
<body>
    <h1>⚔️ Pixel Arcana File Loading Test ⚔️</h1>
    
    <div class="test">
        <h2>CSS Loading:</h2>
        <p id="cssTest" class="loading">Testing...</p>
    </div>
    
    <div class="test">
        <h2>Tarot Deck Data:</h2>
        <p id="deckTest" class="loading">Testing...</p>
    </div>
    
    <div class="test">
        <h2>Reversal Data:</h2>
        <p id="reversalTest" class="loading">Testing...</p>
    </div>
    
    <div class="test">
        <h2>JavaScript Functions:</h2>
        <p id="jsTest" class="loading">Testing...</p>
    </div>
    
    <div class="test">
        <h2>Overall Status:</h2>
        <p id="overallTest" class="loading">Running tests...</p>
    </div>

    <div class="test">
        <h2>Quick Stats:</h2>
        <ul id="stats"></ul>
    </div>

    <script src="tarot-deck.js"></script>
    <script src="reversals.js"></script>
    <script src="pixel-arcana.js"></script>
    
    <script>
        // Run tests after all files load
        window.addEventListener('DOMContentLoaded', function() {
            let allPassed = true;
            
            // Test 1: CSS
            const cssTest = document.getElementById('cssTest');
            const computedStyle = window.getComputedStyle(document.body);
            const bgColor = computedStyle.backgroundColor;
            if (bgColor === 'rgb(15, 15, 30)' || bgColor === '#0f0f1e') {
                cssTest.textContent = '✓ CSS loaded successfully (background color detected)';
                cssTest.className = 'success';
            } else {
                cssTest.textContent = '✗ CSS may not be loading correctly';
                cssTest.className = 'error';
                allPassed = false;
            }
            
            // Test 2: Tarot Deck Data
            const deckTest = document.getElementById('deckTest');
            try {
                if (typeof tarotDeck !== 'undefined' && tarotDeck.majorArcana && tarotDeck.minorArcana) {
                    const majorCount = tarotDeck.majorArcana.length;
                    const wandsCount = tarotDeck.minorArcana.wands ? tarotDeck.minorArcana.wands.length : 0;
                    const cupsCount = tarotDeck.minorArcana.cups ? tarotDeck.minorArcana.cups.length : 0;
                    const swordsCount = tarotDeck.minorArcana.swords ? tarotDeck.minorArcana.swords.length : 0;
                    const pentaclesCount = tarotDeck.minorArcana.pentacles ? tarotDeck.minorArcana.pentacles.length : 0;
                    const totalMinor = wandsCount + cupsCount + swordsCount + pentaclesCount;
                    deckTest.textContent = `✓ Tarot deck loaded: ${majorCount} Major Arcana + ${totalMinor} Minor Arcana = ${majorCount + totalMinor} cards`;
                    deckTest.className = 'success';
                } else {
                    deckTest.textContent = '✗ Tarot deck data not found or incomplete';
                    deckTest.className = 'error';
                    allPassed = false;
                }
            } catch (e) {
                deckTest.textContent = '✗ Error loading tarot deck: ' + e.message;
                deckTest.className = 'error';
                allPassed = false;
            }
            
            // Test 3: Reversal Data
            const reversalTest = document.getElementById('reversalTest');
            try {
                if (typeof reversalData !== 'undefined') {
                    const reversalCount = Object.keys(reversalData).length;
                    const reversalCards = Object.keys(reversalData).join(', ');
                    reversalTest.textContent = `✓ Reversal data loaded: ${reversalCount} cards with reversals (${reversalCards})`;
                    reversalTest.className = 'success';
                } else {
                    reversalTest.textContent = '✗ Reversal data not found';
                    reversalTest.className = 'error';
                    allPassed = false;
                }
            } catch (e) {
                reversalTest.textContent = '✗ Error loading reversal data: ' + e.message;
                reversalTest.className = 'error';
                allPassed = false;
            }
            
            // Test 4: JavaScript Functions
            const jsTest = document.getElementById('jsTest');
            try {
                const requiredFunctions = ['getAllCards', 'getRandomCard', 'displayCard', 'renderGallery', 'renderGameIndex'];
                const missingFunctions = requiredFunctions.filter(fn => typeof window[fn] === 'undefined');
                
                if (missingFunctions.length === 0) {
                    jsTest.textContent = `✓ All core functions loaded (${requiredFunctions.length} functions found)`;
                    jsTest.className = 'success';
                } else {
                    jsTest.textContent = `✗ Missing functions: ${missingFunctions.join(', ')}`;
                    jsTest.className = 'error';
                    allPassed = false;
                }
            } catch (e) {
                jsTest.textContent = '✗ Error checking functions: ' + e.message;
                jsTest.className = 'error';
                allPassed = false;
            }
            
            // Overall Status
            const overallTest = document.getElementById('overallTest');
            if (allPassed) {
                overallTest.textContent = '✓✓✓ ALL TESTS PASSED! Your Pixel Arcana is ready to use. ✓✓✓';
                overallTest.className = 'success';
                overallTest.style.fontWeight = 'bold';
                overallTest.style.fontSize = '1.2em';
            } else {
                overallTest.textContent = '✗ Some tests failed. Check the errors above.';
                overallTest.className = 'error';
                overallTest.style.fontWeight = 'bold';
            }
            
            // Quick Stats
            const stats = document.getElementById('stats');
            try {
                const allCards = getAllCards();
                const reversalCount = Object.keys(reversalData).length;
                const completionPercent = ((reversalCount / 78) * 100).toFixed(1);
                
                stats.innerHTML = `
                    <li>Total Cards: ${allCards.length}</li>
                    <li>Cards with Reversals: ${reversalCount}</li>
                    <li>Reversal Completion: ${completionPercent}%</li>
                    <li>Cards Remaining: ${78 - reversalCount}</li>
                `;
            } catch (e) {
                stats.innerHTML = '<li>Could not calculate stats</li>';
            }
        });
    </script>
</body>
</html>